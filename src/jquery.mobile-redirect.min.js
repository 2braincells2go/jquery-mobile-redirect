/*jQuery Mobile Redirect Plugin v1.0 https://github.com/neonowy/jquery-mobile-redirect | Copyright 2015 Krzysztof Zbudniewek | MIT License*/!function(i,e){var t=function(e,t){this.element=e,this.$element=i(e),this.options=t};t.prototype={defaults:{mobileUrl:"http://m.example.com",fullUrl:"http://example.com",redirectTimeout:3e3,cookieExpirationDays:365,maxMobileWidth:1024,maxMobileHeight:768},init:function(){this.config=i.extend({},this.defaults,this.options),this.setupFullSiteButton(),this.setupRedirect()},setupFullSiteButton:function(){this.isOnFullSite()?this.$element.hide():this.$element.on("click",{context:this},this.onFullSiteButtonClick)},setupRedirect:function(){var i=this;setTimeout(function(){i.redirect()},this.config.redirectTimeout)},isMobile:function(){return this.checkScreen()||this.checkUserAgent()?!0:!1},checkScreen:function(){return screen.width<this.config.maxMobileWidth&&screen.height<this.config.maxMobileHeight?!0:!1},checkUserAgent:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?!0:!1},isOnMobileSite:function(){return e.location.href==this.config.mobileUrl?!0:!1},isOnFullSite:function(){return e.location.href==this.config.fullUrl?!0:!1},hasSelectedFullSite:function(){return"true"==i.cookie("fullSite")?!0:!1},onFullSiteButtonClick:function(i){i.data.context.setFullSiteAndRedirect()},setFullSiteAndRedirect:function(){i.cookie("fullSite","true",{expires:this.config.cookieExpirationDays,path:"/"}),this.redirectToFullSite()},redirect:function(){this.shouldRedirectToMobile()?this.redirectToMobileSite():this.shouldRedirectToFull()&&this.redirectToFullSite()},shouldRedirectToMobile:function(){return this.isMobile()&&this.isOnFullSite()&&!this.hasSelectedFullSite()?!0:!1},shouldRedirectToFull:function(){return!this.isOnMobileSite()||this.isMobile()&&!this.hasSelectedFullSite()?!1:!0},redirectToFullSite:function(){e.location.replace(this.config.fullUrl)},redirectToMobileSite:function(){e.location.replace(this.config.mobileUrl)}},i.fn.mobileRedirect=function(i){return this.each(function(){new t(this,i).init()})}}(jQuery,window);
